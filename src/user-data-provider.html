<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">

<dom-module id="user-data-provider">
  <template>
    <iron-ajax
      auto
      method="get"
      url="[[apiEndPoint]]/rest/mock/users"
      headers={{headers}}
      handle-as="json"
      content-type="application/json"
      on-response="_handleResponse">
    </iron-ajax>
  </template>
  <script>
    class UserDataProvider extends Polymer.Element {
      static get is() {
        return 'user-data-provider';
      }
      static get properties() {
        return {
          apiEndPoint: {
            type: String,
            value: 'http://proveng.cloud.provectus-it.com'
          },
          customHeader: {
            type: String,
            value: "ya29.GlvVBEgVB6Mz9GfrBuGyhJWw1jqPW4wplhRL1b21mBRWySG_XYdavOj3Jb1WUYrHBswmsHY1j95fMHbBhxdoam_88ZxMWGppp4_y9tyMsa8coiVCR4AYIqlJ8-qh"
          },
          headers: {
            type: String,
            computed: '_getHeaders(customHeader)'
          },
          data: {
            type: Array,
            notify: true
          }
        }
      }
      _handleResponse(event) {
        this.data = event.detail.response.result;
      }

      _getHeaders(customHeader) {
        return {token: customHeader};
      }
    }
    window.customElements.define(UserDataProvider.is, UserDataProvider);
  </script>
</dom-module>